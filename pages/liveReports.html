<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.min.js"></script> -->
<script>
    $(() => {
        console.log(coinDOM.cResult)
        liveData(coinDOM.cResult);
    });




    let ctx = document.getElementById("liveChart");


    var newBar = {
        labels: ['2018-02-27 11:33:35', '2018-02-27 11:34:23', '2018-02-27 11:37:25', '2018-02-27 11:37:58'],
        datasets: [{
            fill: false,
            label: 'Coin 1',
            backgroundColor: "red",
            data: [22.4, 15.9, 32.5, null],
        },
        {
            fill: false,
            label: 'Coin 2',
            backgroundColor: "yellow",
            data: [null, null, null, 2, 1],
        },
        {
            fill: false,
            label: 'Coin 3',
            backgroundColor: "green",
            data: [-8, 33, 44, 2, 1],
        },
        {
            fill: false,
            label: 'Coin 4',
            backgroundColor: "orange",
            data: [11, null, 44, 2, 1],
        }, {
            fill: false,
            label: 'Coin 5',
            backgroundColor: "blue",
            data: [-2, 8.2, 18.5, 20.3, null],
        }],
    }

    var myChart = new Chart(ctx, {
        type: 'line',
        data: newBar,

        options: {
            scales: {
                yAxes: [{
                    ticks: {
                        stepSize: 2,
                        beginAtZero: true
                    }
                }]
            },
            title: {
                display: true,
                fontSize: 16,
                text: 'Crypto Coin Comparison'
            },
        }
    });

    // myChart.data.datasets[0].data[2] = 50;
    // myChart.data.datasets[0].data[3] = 150;
    // myChart.data.datasets[0].data[4] = 350;
    // addData(myChart, "0", [0, 25, 50, 100])

    // function addData(chart, label, data) {
    //     myChart.data.labels.push(label);
    //     myChart.data.datasets.forEach((dataset) => {
    //         dataset.data.push(data);
    //     });
    //     myChart.update();
    // }

    function liveData(resultObj) {
        $(() => {

            for (const i in resultObj) {
                if (resultObj.hasOwnProperty(i)) {
                    // console.log(JSON.parse(i), JSON.parse[i], i)
                    newBar.datasets[i].label = resultObj
                    // newBar.datasets[i].data.push([i])

                }
            }
            // let datah = [4, 5, 50, 500, 1500]
            // myChart.data.datasets.forEach((dataset) => {
            //     dataset.data.push(datah);
            // });
            myChart.update();
        });
    }



// a sample of how the returned data looks like:
//coinDOM.cResult
    // {BTC: 0.05503, USD: 396.38, EUR: 353.13}


</script>

<canvas id="liveChart"></canvas>